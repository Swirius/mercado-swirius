<!-- fragmentos/nav.html -->
<div th:fragment="navbar">
    <header>
        <h1>Mercado Swirius</h1>
        <nav>
            <a class="nav-link" th:href="@{/}">ğŸ  Inicio</a>

            <!-- Solo autenticados -->
            <a class="nav-link" th:if="${#authorization.expression('isAuthenticated()')}" th:href="@{/carrito}">ğŸ›’ Carrito</a>
            <a class="nav-link" th:if="${#authorization.expression('isAuthenticated()')}" th:href="@{/historial}">ğŸ“œ Mis Compras</a>

            <!-- Solo admin -->
            <a class="nav-link" th:if="${#authorization.expression('hasRole(''ADMIN'')')}" th:href="@{/productos/nuevo}">â• Nuevo Producto</a>

            <!-- Logout como botÃ³n -->
            <form th:action="@{/logout}" method="post" th:if="${#authorization.expression('isAuthenticated()')}" style="display:inline;">
			    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
			    <button class="btn-secundario" type="submit">Logout</button>
			</form>


            <!-- Si no estÃ¡ autenticado -->
            <a class="nav-link" th:unless="${#authorization.expression('isAuthenticated()')}" th:href="@{/login}">ğŸ” Login</a>
            <a class="nav-link" th:unless="${#authorization.expression('isAuthenticated()')}" th:href="@{/registro}">ğŸ“ Registro</a>
        </nav>
    </header>
</div>
